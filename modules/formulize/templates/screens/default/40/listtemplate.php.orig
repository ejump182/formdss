<?php
// keep track of which course we're doing, because each entry is a section, so we need to only show certain info about the course once
$newCourse = false;
$courseTitle = display($entry, 'ro_module_full_course_title');
if($GLOBALS['dara_course']['title'] != $courseTitle) {
    $newCourse = true;
    $sectionCounter = 0;
    $GLOBALS['dara_course']['title'] = $courseTitle;
    printSections();
    $GLOBALS['dara_course']['sections'] = array();
    print "<h2>".$courseTitle."</h2>\n";
    print "<p>".display($entry, 'ro_module_semester')."</p>\n";
}

$type = display($entry, 'component_type');
$sectionCounter++;
if($type != 'Tutorial') {
    readSection($entry, $entry_id, $type);
    if($sectionCounter>1) {
        $courseIds = internalRecordIds($entry, 3); // 3 is RO form
        $courseId = $courseIds[0];
        print "<p>Coordinatorship (".display($entry, 'ro_module_coordinatorship_weighting')."): \n";
        displayElement('','ro_module_course_coordinator',$courseId);
        print "\n</p>\n";
    }
} else {
    $taShips = display($entry, 'taships_type');
    $taShips = is_array($taShips) ? $taShips : array($taShips);
    if(in_array("Tutorial taught by Instructor", $taShips)) {
        readSection($entry, $entry_id, $type);
    }
    $GLOBALS['dara_course']['sections'][display($entry, 'course_components_related_lecture')]['has_tutorial'] = display($entry, 'teaching_weighting');
}

